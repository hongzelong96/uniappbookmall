(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods"],{"04dc":function(o,e,n){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s(n("6eac"));function s(o){return o&&o.__esModule?o:{default:o}}var i=function(){n.e("pages/goods/goodsHeader").then(function(){return resolve(n("7d09"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/popupSpec").then(function(){return resolve(n("db05"))}.bind(null,n)).catch(n.oe)},a={components:{goodsHeader:i,popupSpec:c},onLoad:function(o){this.goodsID=JSON.parse(o.goodsID),this.initData(this.goodsID)},data:function(){return{isKeep:!1,goodsData:{swiperList:[],comment:[{face:"",content:"",username:""}],descriptionStr:""},goodsInfo:{id:"",name:"",price:"",number:1,img:""},currentSwiper:0,spaceInfo:{showSpace:!1}}},methods:{initData:function(o){var e=this;this.request({url:t.default.getGoods,method:"GET",header:{"Content-Type":"application/json"},data:{BookId:o},success:function(o){console.log("bookdetial",o),e.goodsData.swiperList=o.swiperList,e.goodsInfo.name=o.bookDetail[0].name,e.goodsInfo.price=o.bookDetail[0].price,e.goodsInfo.img=o.swiperList[0].src,e.goodsInfo.id=o.bookDetail[0].id}})},swiperChange:function(o){this.currentSwiper=o.detail.current},setSelectSpec:function(o){this.goodsInfo.spec=o},hideSpec:function(){this.spaceInfo.showSpace=!1},add:function(){this.goodsInfo.number++},sub:function(){this.goodsInfo.number<=1||this.goodsInfo.number--},handleRatings:function(){o.setStorageSync("comments",this.goodsData.comment),o.navigateTo({url:"./ratings"})},keep:function(){this.isKeep=!this.isKeep,this.isKeep&&o.showToast({icon:"success",title:"已收藏"})},joinCart:function(){var e=this;o.getStorage({key:"goodsList",success:function(o){var n=o.data,t=!1;console.log("Storage goodList:",n),console.log("this.goodInfo:",e.goodsInfo),n.forEach((function(o){console.log(o.id),o.id==e.goodsInfo.id&&(console.log("存在，数量",o.number),o.number+=Number(e.goodsInfo.number),t=!0)})),t||n.push(e.goodsInfo),e.setGoodsList(n)},fail:function(o){console.log("加入失败");var n=[];n.push(e.goodsInfo),e.setGoodsList(n)}})},setGoodsList:function(e){o.setStorage({key:"goodsList",data:e,success:function(){o.showToast({icon:"success",title:"添加购物车成功"})}})},handleBuy:function(){var e=[];e.push(this.goodsInfo),o.setStorage({key:"confirmList",data:e,success:function(){o.navigateTo({url:"../order/confirm"})}})}}};e.default=a}).call(this,n("543d")["default"])},"372e":function(o,e,n){"use strict";(function(o){n("85e9");t(n("66fd"));var e=t(n("c3cd"));function t(o){return o&&o.__esModule?o:{default:o}}wx.__webpack_require_UNI_MP_PLUGIN__=n,o(e.default)}).call(this,n("543d")["createPage"])},5205:function(o,e,n){},"63a7":function(o,e,n){"use strict";var t=n("5205"),s=n.n(t);s.a},c3cd:function(o,e,n){"use strict";n.r(e);var t=n("dd02"),s=n("fe7e");for(var i in s)"default"!==i&&function(o){n.d(e,o,(function(){return s[o]}))}(i);n("63a7");var c,a=n("f0c5"),u=Object(a["a"])(s["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],c);e["default"]=u.exports},dd02:function(o,e,n){"use strict";var t;n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return t}));var s=function(){var o=this,e=o.$createElement;o._self._c},i=[]},fe7e:function(o,e,n){"use strict";n.r(e);var t=n("04dc"),s=n.n(t);for(var i in t)"default"!==i&&function(o){n.d(e,o,(function(){return t[o]}))}(i);e["default"]=s.a}},[["372e","common/runtime","common/vendor"]]]);